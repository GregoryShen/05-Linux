# 第二十二章 软件安装 RPM，SRPM 与 YUM

> 虽然使用原始码进行软件编译可以具有定制化的设置，但对于Linux distribution 的发布商来说，则有软件管理不易的问题，毕竟不是每个人都会进行原始码编译的。如果能够将软件预先在相同的硬件和操作系统上编译好再发布的话，就能够让相同的distribution具有完全一致的版本了。如果再加上简易的安装、删除、管理等机制的话，对于软件管理就会简单的多。

## 软件管理员简介

以原始码的方式来安装软件，也就是利用厂商放出来的Tarball 来进行软件的安装，每次安装软件都需要检测操作系统与环境、设置编译参数、实际的编译、最后还要根据个人喜好来安装软件到路径。

厂商可以先在他们的系统上编译出来可执行文件，然后将这个编译好的可执行文件直接放出来给使用者安装。

如果在安装的时候还可以加上一些跟这些程序相关的信息，将它建立称为数据库，就可以进行安装、反安装、升级和验证等等的相关功能。

在Linux上面至少就有两种的这方面的软件管理，分别是RPM 和 Debian的dpkg。CentOS 主要以RPM 为主。

### Linux 界的两大主流： RPM和 DPKG

Linux 开发商现在固定的硬件平台和操作系统平台上将需要安装或升级的软件编译好，然后将这个软件的所有相关文件打包成为一个特殊格式的文件，在这个文件内还包含了预先检测系统和依赖软件的脚本，并提供记录该软件提供的所有文件信息等。

用户端取得这个文件后，只要通过特定的指令来安装，那么该软件就会按照内部的脚本来检测依赖的软件是否存在，如果安装环境符合要求，就会开始安装。

目前Linux软件安装方式最常见的有两种，分别是：

* dpkg：

	这个机制最早是由Debian Linux 社区所开发出来的，通过dpkg 机制，Debian提供的软件就能够简单的安装起来，同时还能提供安装后的软件信息。只要是衍生于Debian的其他Linux distributions 大多使用dpkg 这个机制来管理软件的，包括B2D, Ubuntu 等等。

* RPM：

	这个机制最早是由Red Hat 这家公司开发出来的，因此很多distributions 就使用这个机制来作为软件安装的管理方式。 包括Fedora, CentOS, SuSE 等都是用这个。

不论 dpkg/rpm 这些机制或多或少都会有软件属性依赖的问题， 那该如何解决呢？

### 什么是RPM 和 SRPM



### 什么是i386,i586, i686, noarch, x86_64



### RPM 的优点



### RPM 属性依赖的克服方式： YUM 线上升级



## RPM 软件管理程序： rpm

### RPM 默认安装的路径



### RPM 安装



### RPM 升级与更新



### RPM 查询



### RPM 验证和数字签名



### RPM 反安装和重建数据库



## YUM 线上升级机制

### 利用yum进行查询、安装、升级和删除功能



### yum的配置文件



### yum的软件群组功能



### EPEL/ELRepo 外挂软件以及自定义文件



### 全系统自动升级



### 管理的选择：RPM 还是Tarball



### 基础服务管理：以Apache 为例



SRPM 的使用：rpmbuild











